Fortran v3 example suite (audit)
================================

SFINCS Fortran v3 ships with an extensive set of example inputs in
``sfincs/fortran/version3/examples``. These examples cover many features that
are **not** yet implemented end-to-end in `sfincs_jax` (e.g. VMEC-based geometry,
full collision operators, ``Phi1`` coupling, ambipolar solves, etc.).

For convenience, a copy of the upstream example suite (and the upstream ``utils`` postprocessing scripts)
is vendored in this repository under ``examples/sfincs_examples``. A best-effort runner is provided:

.. code-block:: bash

   python examples/sfincs_examples/run_sfincs_jax.py --write-output

This page provides a *mechanical audit* of the upstream example namelists to make it
easy to track what still needs to be ported.

.. note::

   The audit table only checks whether `sfincs_jax` can parse the namelist, build grids/geometry,
   and write a `sfincsOutput.h5`-style file (and, optionally, whether RHSMode=2/3 transport-matrix
   solves are *declared*). It does **not** imply end-to-end solver parity for that case.

How the audit is generated
--------------------------

The table below is generated by scanning each upstream ``input.namelist`` and attempting:

1. ``grids_from_namelist`` (grid construction)
2. ``geometry_from_namelist`` (geometry construction)
3. ``sfincs_jax_output_dict`` (the datasets written by ``sfincs_jax write-output``)

The ``sfincs_jax`` column reflects the highest level achieved without errors for that
input file.

Regenerating the table
----------------------

From the `sfincs_jax` repository root:

.. code-block:: bash

   python scripts/generate_fortran_example_audit.py

You can point at a different Fortran checkout using ``--examples-root``.

Audit table
-----------

.. include:: _generated/fortran_examples_table.rst
